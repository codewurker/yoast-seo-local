!function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=83)}({50:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{static async geoCodeAddress(e){const t=new google.maps.Geocoder;if("object"==typeof e)return new Promise((o,n)=>{t.geocode(e,(e,t)=>"OK"===t?o(e):n(t))});throw new Error("Location should be an object")}}},83:function(e,t,o){"use strict";var n=a(o(50)),i=a(o(84));function a(e){return e&&e.__esModule?e:{default:e}}(new class{constructor(){this.addressFields=[document.querySelector(".wpseo_local_address_input"),document.querySelector(".wpseo_local_zipcode_input"),document.querySelector(".wpseo_local_city_input"),document.querySelector(".wpseo_local_state_input"),document.querySelector('.select[id*="_country"]')],this.latLngSettingsContainer=document.getElementById("location-coordinates-settings-wrapper"),this.latLngSettingsFieldWrapper=document.getElementById("location-coordinates-settings-lat-lng-wrapper"),this.calculateLatLngButton=document.getElementById("calculate_lat_lng_button"),this.latField=document.querySelector(".wpseo_local_lat_input"),this.lngField=document.querySelector(".wpseo_local_lng_input"),this.timezoneField=document.querySelector('select[id*="_timezone"]'),this.apiKey=wpseoLocalLocations.apiKey,this.maybeGeoCodeAddress=this.maybeGeoCodeAddress.bind(this),this.maybeShowAddressChangesNotification=this.maybeShowAddressChangesNotification.bind(this),this.setTimezone=this.setTimezone.bind(this),this.formatAddress=this.formatAddress.bind(this)}addEventListeners(){document.addEventListener("click",this.maybeGeoCodeAddress),document.addEventListener("change",this.maybeShowAddressChangesNotification)}async maybeGeoCodeAddress(e){if(null!==this.latField&&null!==this.lngField&&(this.calculateLatLngNotification=document.querySelector(".yoast-seo-local__alert.location-calculate-alert"),this.calculateLatLngButton===e.target)){e.preventDefault(),this.errorField=document.querySelector(".wpseo_local_geocoding_error");const t=this.latField.value,o=this.lngField.value,i=this.formatAddress();null!==this.errorField&&this.errorField.parentNode.removeChild(this.errorField),this.latField.value="",this.lngField.value="";const a=document.createElement("div");try{const e=await n.default.geoCodeAddress({address:i});this.latField.value=e[0].geometry.location.lat(),this.lngField.value=e[0].geometry.location.lng(),null!==this.calculateLatLngNotification&&this.calculateLatLngNotification.parentNode.removeChild(this.calculateLatLngNotification),a.innerHTML=wpseoLocalLocations.calculateLatLngSuccessMessage,this.latLngSettingsContainer.insertBefore(a,this.latLngSettingsFieldWrapper),(""!==this.latField.value&&""!==this.lngField.value&&this.latField.value!==t||this.lngField.value!==o)&&this.setTimezone()}catch(e){const t=document.createElement("p");switch(t.classList.add("wpseo_local_geocoding_error"),null!==this.calculateLatLngNotification&&this.calculateLatLngNotification.parentNode.removeChild(this.calculateLatLngNotification),a.innerHTML=wpseoLocalLocations.calculateLatLngErrorMessage,this.latLngSettingsContainer.insertBefore(a,this.latLngSettingsFieldWrapper),e){case"ZERO_RESULTS":t.appendChild(document.createTextNode("We could not retrieve coordinates for this address."));break;case"OVER_QUERY_LIMIT":t.appendChild(document.createTextNode("You are over your query limit."));break;case"REQUEST_DENIED":t.appendChild(document.createTextNode("Your API key is not entered or not valid."))}}}}async maybeShowAddressChangesNotification(e){if(-1!==this.addressFields.indexOf(e.target)){this.calculateLatLngNotification=document.querySelector(".yoast-seo-local__alert.location-calculate-alert"),null!==this.calculateLatLngNotification&&this.calculateLatLngNotification.parentNode.removeChild(this.calculateLatLngNotification);const e=document.createElement("div");e.innerHTML=wpseoLocalLocations.addressChangedMessage,this.latLngSettingsContainer.insertBefore(e,this.latLngSettingsFieldWrapper)}}formatAddress(){let e=[];return this.addressFields.forEach((function(t){""!==t.value&&e.push(t.value)})),e.join(", ")}async setTimezone(){const e=this.latField.value+", "+this.lngField.value;try{const t=await i.default.getTimezone(e,this.apiKey);""!==t&&jQuery(this.timezoneField).val(t).trigger("change")}catch(e){console.log(e)}}}).addEventListeners()},84:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{static async getTimezone(e,t){const o=Math.floor(Date.now()/1e3),n=new URLSearchParams;n.append("location",e),n.append("timestamp",o),n.append("key",t);const i="https://maps.googleapis.com/maps/api/timezone/json?"+n;return new Promise((e,t)=>{const o=new XMLHttpRequest;o.open("GET",i),o.onload=()=>{if(200===o.status){const n=JSON.parse(o.responseText);return"OK"===n.status?e(n.timeZoneId):t(n)}return t(o.status)},o.send()})}}}});